{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/components/user-chat-page/user.tsx"],"sourcesContent":["\"use client\";\nimport React, { useContext, useEffect, useRef, useState, useMemo } from \"react\";\n\n// ====================================================================\n// --- MOCK DEPENDENCIES (To make the component self-contained) ---\n// Since the environment doesn't have access to your file system (e.g., \"@/app/...\" or \"../ui/...\"),\n// we must mock the imports to ensure compilation.\n// ====================================================================\n\n// 1. Icons (lucide-react mocks)\nconst SendIcon = (props) => (<svg {...props} xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"m22 2-7 20-4-9-9-4Z\"/><path d=\"M22 2 11 13\"/></svg>);\nconst ListChecksIcon = (props) => (<svg {...props} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"m3 15 2 2 4-4\"/><path d=\"M21 13v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h4\"/><path d=\"M21 16l-2 2-4-4\"/></svg>);\nconst TicketCheckIcon = (props) => (<svg {...props} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M18 9V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h4\"/><path d=\"M19 16.5l-3.5-3.5\"/><path d=\"M15 16.5h2\"/><path d=\"M19 13v6a2 2 0 0 0 2 2h-6a2 2 0 0 0-2-2v-6a2 2 0 0 0 2-2h2a2 2 0 0 1 2 2Z\"/></svg>);\n\n// 2. UI Components (shadcn/ui mocks)\nconst Card = ({ children, className }) => <div className={`bg-white rounded-xl ${className}`}>{children}</div>;\nconst CardContent = ({ children, className }) => <div className={`p-4 ${className}`}>{children}</div>;\nconst Input = React.forwardRef(({ className, placeholder, ...props }, ref) => (\n    <input ref={ref} className={`px-4 py-2 border rounded-lg ${className}`} placeholder={placeholder} {...props} />\n));\nconst Button = ({ children, className, onClick, id, ...props }) => (\n    <button id={id} onClick={onClick} className={`flex items-center justify-center rounded-lg font-semibold ${className}`} {...props}>\n        {children}\n    </button>\n);\nconst Avatar = ({ children, className }) => <div className={`rounded-full overflow-hidden ${className}`}>{children}</div>;\nconst AvatarImage = ({ src, alt }) => <img src={src} alt={alt} className=\"w-full h-full object-cover\" />;\nconst AvatarFallback = ({ children, className }) => <div className={`flex items-center justify-center w-full h-full ${className}`} style={{ backgroundColor: '#e0e7ff', color: '#4338ca' }}>{children}</div>; // Custom default background\nconst ScrollArea = ({ children, className }) => <div className={`overflow-y-auto ${className}`}>{children}</div>; // Simplified ScrollArea\nconst Scrollbar = ({ orientation }) => null; // Mocked\n\n// 3. Context & Helpers\n// Defined context structure to avoid runtime errors in UserBlock\nconst userContext = React.createContext({\n    allMessages: [],\n    setAllMessages: () => {},\n    webContainerState: null,\n    setWebContainerState: () => {},\n});\nconst toast = { \n    error: (msg) => console.error(`[TOAST ERROR]: ${msg}`),\n    success: (msg) => console.log(`[TOAST SUCCESS]: ${msg}`)\n};\n\nconst getMessages = async (id) => {\n    // Mock message data structure for demonstration\n    const mockMessages = [\n        { userMessage: \"I need a responsive header and navigation bar using Tailwind.\", ai: JSON.stringify([{ title: \"Created index.html with header structure\", status: \"Completed\" }, { title: \"Added Tailwind CSS dependencies\", status: \"Completed\" }]) },\n        { userMessage: \"Now, add a hero section with a call-to-action button, use a bright orange color for the button.\", ai: JSON.stringify([{ title: \"Defined Hero Section Layout in index.html\", status: \"Completed\" }, { title: \"Added CTA Button with primary orange color\", status: \"Pending\" }, { title: \"Styling hero section with responsiveness\", status: \"Pending\" }]) },\n    ];\n    return { data: { messages: mockMessages } };\n};\nconst axiosInstance = {\n    post: (url, data) => {\n        console.log(`[AXIOS MOCK] POST to ${url} with data:`, data);\n        return new Promise(resolve => setTimeout(() => resolve({\n            data: { message: \"```xml\\n<webcontainerState>Mock Updated State</webcontainerState>```\" }\n        }), 500));\n    }\n};\nconst xmltostring = async (xml) => {\n    console.log(\"[HELPER MOCK] Converting XML to steps.\");\n    return [{ title: \"Running file update steps...\", status: \"Pending\" }];\n};\nconst CreateMessage = async (id, user, ai) => console.log(`[HELPER MOCK] Message created for chat ${id}.`);\nconst UpdateWebContainerState = async (id, state) => console.log(`[HELPER MOCK] WebContainer state updated for chat ${id}.`);\n\n\n// ====================================================================\n// --- USER BLOCK COMPONENT (Original Logic Retained) ---\n// ====================================================================\n\nexport function UserBlock({ id }: { id: string }) {\n  // Destructure from mock context (or real context in your app)\n  const { allMessages, setAllMessages, setWebContainerState, webContainerState } = useContext(userContext); \n  const [updateTheStates, setUpdateTheStates] = useState<Boolean>(true);\n  const userprompt = useRef<HTMLInputElement | null>(null)\n  const messagesEndRef = useRef<HTMLDivElement | null>(null);\n\n  // Function to scroll to the bottom of the chat area\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  async function followBackPromptResponseFromAi(payload: string, prompt: string) {\n    try {\n      const response = await axiosInstance.post(\"/follow-back-prompt\", { lastWebcontainerState: payload, userPrompt: prompt });\n\n      // Removing the unwanted characters (retaining original slicing logic)\n      const modifiedXML = response.data.message.slice(7, -4);\n      await UpdateWebContainerState(id, modifiedXML)\n      setWebContainerState(modifiedXML);\n      \n      const correctedXML = await xmltostring(modifiedXML);\n      \n      await CreateMessage(id, prompt, JSON.stringify(correctedXML))\n      setUpdateTheStates(true);\n    } catch (err) {\n      console.log(err)\n      toast.error(\"Ai Model is not Running\");\n    }\n  }\n\n  useEffect(() => {\n    if (updateTheStates) {\n      async function getwebtateAndMessages() {\n        const messages = await getMessages(id);\n\n        if (messages.data != null) {\n          let allMessagesFromResponse = [];\n          for (let i = 0; i < messages.data.messages.length; i++) {\n            const newMessage = {\n              user: messages.data.messages[i].userMessage,\n              // Must parse the AI response since it's stored as a JSON string\n              ai: JSON.parse(messages.data.messages[i].ai) \n            }\n            allMessagesFromResponse.push(newMessage)\n          }\n\n          setAllMessages(allMessagesFromResponse);\n        }\n        \n        scrollToBottom(); \n      }\n\n      getwebtateAndMessages()\n      setUpdateTheStates(false);\n    }\n\n  }, [updateTheStates, id, setAllMessages]);\n\n  useEffect(() => {\n    // Scroll to bottom whenever messages are updated\n    scrollToBottom();\n  }, [allMessages]);\n\n\n  return (\n    <div className=\"flex flex-col h-full w-full p-4 space-y-4\">\n      \n      {/* --- Chat History Area --- */}\n      {/* Set h-full on ScrollArea and its container to ensure it fills the flex-1 space */}\n      <Card className=\"flex-1 min-h-0 shadow-lg border-gray-200\">\n        <ScrollArea className=\"h-full\">\n          <CardContent className=\"flex flex-col gap-6 p-4\">\n            {allMessages?.map((item, index) => (\n              <div className=\"flex flex-col gap-4\" key={index}>\n                \n                {/* User Message (Right Aligned) */}\n                <div className=\"flex justify-end items-end gap-3\">\n                    {/* User Message Bubble */}\n                    <div className=\"max-w-[80%] lg:max-w-[70%] bg-indigo-600 text-white p-3 rounded-xl rounded-br-sm shadow-md break-words\">\n                        <p className=\"text-sm font-medium\">{item.user}</p>\n                    </div>\n                    {/* User Avatar */}\n                    <Avatar className=\"h-8 w-8\">\n                        <AvatarImage src=\"https://ui.shadcn.com/avatars/03.png\" alt=\"User Avatar\" />\n                        <AvatarFallback className=\"bg-indigo-200 text-indigo-700 font-bold text-sm\">U</AvatarFallback>\n                    </Avatar>\n                </div>\n\n                {/* AI Response (Left Aligned) */}\n                <div className=\"flex justify-start items-start gap-3\">\n                    {/* AI Avatar */}\n                    <Avatar className=\"h-8 w-8\">\n                        <AvatarImage src=\"https://ui.shadcn.com/avatars/05.png\" alt=\"AI Avatar\" />\n                        <AvatarFallback className=\"bg-gray-200 text-gray-700 font-bold text-sm\">AI</AvatarFallback>\n                    </Avatar>\n                    \n                    {/* AI Steps Container */}\n                    <div className=\"max-w-[80%] lg:max-w-[70%] flex flex-col gap-1 p-3 bg-gray-100 rounded-xl rounded-tl-sm shadow-sm border border-gray-200\">\n                        {item.ai.map((newItem, stepIndex) => (\n                            <div \n                                key={stepIndex} \n                                className={`flex items-start gap-2 p-2 rounded-lg transition-colors \n                                    ${newItem.status === \"Pending\" \n                                        ? \"bg-white border border-indigo-300 shadow-sm\" \n                                        : \"bg-green-50 border border-green-300\"}`}\n                            >\n                                {/* Status Icon */}\n                                <div className={`flex-shrink-0 mt-1 ${newItem.status === \"Pending\" ? \"text-indigo-500\" : \"text-green-600\"}`}>\n                                    {newItem.status === \"Pending\" ? (\n                                        <TicketCheckIcon className=\"h-4 w-4\" />\n                                    ) : (\n                                        <ListChecksIcon className=\"h-4 w-4\" />\n                                    )}\n                                </div>\n                                {/* Step Title */}\n                                <p className={`text-sm font-medium break-words ${newItem.status === \"Pending\" ? \"text-gray-800\" : \"text-green-800\"}`}>\n                                    {newItem.title}\n                                </p>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n              </div>\n            ))}\n            \n            {/* Scroll Anchor */}\n            <div ref={messagesEndRef} />\n            \n          </CardContent>\n        </ScrollArea>\n      </Card>\n      \n      {/* --- Input Area --- */}\n      <Card className=\"w-full h-auto shadow-xl border-gray-300\">\n        <CardContent className=\"flex gap-4 p-4 items-center\">\n          <Input \n            ref={userprompt} \n            className=\"flex-1 h-12 text-base border-indigo-300 focus:border-indigo-500 rounded-lg shadow-inner\"\n            placeholder=\"Ask AI for help or provide instructions (e.g., 'Change the button color to red')\" \n            onKeyDown={(e) => {\n                if (e.key === 'Enter' && webContainerState != null && userprompt.current != null) {\n                    e.preventDefault(); \n                    document.getElementById('send-prompt-button')?.click();\n                }\n            }}\n          />\n          <Button \n            id=\"send-prompt-button\"\n            onClick={async () => {\n              if (webContainerState != null && userprompt.current != null && userprompt.current.value.trim() !== \"\") {\n                console.log(\"re-prompting...\")\n                await followBackPromptResponseFromAi(webContainerState, userprompt.current.value)\n                userprompt.current.value = \"\"\n              } else if (userprompt.current != null && userprompt.current.value.trim() === \"\") {\n                toast.error(\"Please enter a message to the AI.\");\n              }\n            }} \n            className=\"h-12 w-12 bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-md transition-all active:scale-95\"\n          >\n            <SendIcon className=\"h-5 w-5\" />\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n// ====================================================================\n// --- APP WRAPPER FOR DEMONSTRATION ---\n// This component provides the necessary context and state for UserBlock to run.\n// ====================================================================\nexport default function App() {\n    const [allMessages, setAllMessages] = useState([]);\n    const [webContainerState, setWebContainerState] = useState(\"initial_state\");\n    const contextValue = useMemo(() => ({\n        allMessages, setAllMessages, webContainerState, setWebContainerState\n    }), [allMessages, webContainerState]);\n\n    return (\n        <div className=\"h-screen w-full flex justify-center items-center p-4\" style={{ fontFamily: 'Inter, sans-serif' }}>\n            <div className=\"h-[90vh] w-full max-w-xl border border-gray-300 rounded-2xl shadow-2xl bg-white\">\n                <userContext.Provider value={contextValue}>\n                    <UserBlock id=\"mock-chat-123\" />\n                </userContext.Provider>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 629, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 644, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/app/helpers/getWebContainerState.ts"],"sourcesContent":["\"use server\"\nimport { prisma } from \"@/lib/prisma\";\nimport CheckAutenticated from \"./checkAuthenticates\";\n\nexport default async function getWebcontainerState(chatId : string) {\n    const response = await CheckAutenticated();\n    if(response.success == false) return {\n                success : false,\n                message : \"Authorisation Error\",\n                data : null\n    }\n    else {\n        try {\n                const webState = await prisma.chat.findFirst({\n                    where : {\n                            id : chatId,                        \n                    },\n                     \n                    select : {  \n                        state : {\n                            select : {\n                                files : true\n                            }\n                        }\n                    }\n                })\n    \n            return {\n                success : true,\n                message : \"files Received\",\n                data : webState\n            }\n\n        }\n        catch (err) {\n            console.log(err)\n            return {\n                success : false,\n                message : \"Database Error\",\n                data : null\n            }\n        }\n    }\n}"],"names":[],"mappings":";;;;;;;2CAI8B,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 825, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/components/ui/accordion.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDownIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Accordion({\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Root>) {\n  return <AccordionPrimitive.Root data-slot=\"accordion\" {...props} />\n}\n\nfunction AccordionItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Item>) {\n  return (\n    <AccordionPrimitive.Item\n      data-slot=\"accordion-item\"\n      className={cn(\"border-b last:border-b-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AccordionTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {\n  return (\n    <AccordionPrimitive.Header className=\"flex\">\n      <AccordionPrimitive.Trigger\n        data-slot=\"accordion-trigger\"\n        className={cn(\n          \"focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <ChevronDownIcon className=\"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200\" />\n      </AccordionPrimitive.Trigger>\n    </AccordionPrimitive.Header>\n  )\n}\n\nfunction AccordionContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Content>) {\n  return (\n    <AccordionPrimitive.Content\n      data-slot=\"accordion-content\"\n      className=\"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm\"\n      {...props}\n    >\n      <div className={cn(\"pt-0 pb-4\", className)}>{children}</div>\n    </AccordionPrimitive.Content>\n  )\n}\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,UAAU,EACjB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAa,GAAG,KAAK;;;;;;AACjE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,QAAQ,EACR,GAAG,OACqD;IACxD,qBACE,8OAAC,+KAAyB;QAAC,WAAU;kBACnC,cAAA,8OAAC,gLAA0B;YACzB,aAAU;YACV,WAAW,IAAA,yHAAE,EACX,8SACA;YAED,GAAG,KAAK;;gBAER;8BACD,8OAAC,2OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,QAAQ,EACR,GAAG,OACqD;IACxD,qBACE,8OAAC,gLAA0B;QACzB,aAAU;QACV,WAAU;QACT,GAAG,KAAK;kBAET,cAAA,8OAAC;YAAI,WAAW,IAAA,yHAAE,EAAC,aAAa;sBAAa;;;;;;;;;;;AAGnD","debugId":null}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,kLAAwB;QACvB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,8OAAC,sLAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,oLAA0B;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,8OAAC,iMAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,yHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6LAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB","debugId":null}},
    {"offset": {"line": 987, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/app/helpers/buildTree.ts"],"sourcesContent":["interface FileSystemTree {\n  [name: string]: DirectoryNode | FileNode;\n}\n\ninterface DirectoryNode {\n  directory: FileSystemTree;\n}\n\ninterface FileNode {\n  file: {\n    contents: string | Uint8Array;\n  };\n}\n\nexport function buildTreeUI(files: { title: string; content: string }[]): FileSystemTree {\n  const rootMap: FileSystemTree = {};\n\n  for (const file of files) {\n    const parts = file.title.split(\"/\");\n    let currentLevel: FileSystemTree = rootMap;\n\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n      const isFile = i === parts.length - 1;\n\n      if (isFile) {\n        currentLevel[part] = {\n          file: { contents: file.content },\n        };\n      } else {\n        if (!currentLevel[part]) {\n          currentLevel[part] = { directory: {} };\n        }\n        currentLevel = (currentLevel[part] as DirectoryNode).directory;\n      }\n    }\n  }\n\n  return rootMap;\n}"],"names":[],"mappings":";;;;AAcO,SAAS,YAAY,KAA2C;IACrE,MAAM,UAA0B,CAAC;IAEjC,KAAK,MAAM,QAAQ,MAAO;QACxB,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,CAAC;QAC/B,IAAI,eAA+B;QAEnC,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;YACrC,MAAM,OAAO,KAAK,CAAC,EAAE;YACrB,MAAM,SAAS,MAAM,MAAM,MAAM,GAAG;YAEpC,IAAI,QAAQ;gBACV,YAAY,CAAC,KAAK,GAAG;oBACnB,MAAM;wBAAE,UAAU,KAAK,OAAO;oBAAC;gBACjC;YACF,OAAO;gBACL,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;oBACvB,YAAY,CAAC,KAAK,GAAG;wBAAE,WAAW,CAAC;oBAAE;gBACvC;gBACA,eAAe,AAAC,YAAY,CAAC,KAAK,CAAmB,SAAS;YAChE;QACF;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1021, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/app/helpers/xmltostring.ts"],"sourcesContent":["import { Step } from \"../types/user\";\n\nexport default async function xmltostring(xml: string): Promise<Step[]> {\n  if (!xml) return [];\n\n  let cleaned = xml\n    .replace(/^\\uFEFF/, \"\")\n    .replace(/^```xml\\s*/i, \"\")\n    .replace(/```$/i, \"\")\n    .replace(/<\\/?boltArtifact[^>]*>/gi, \"\")\n    .replace(/&lt;/g, \"<\")\n    .replace(/&gt;/g, \">\")\n    .replace(/&amp;/g, \"&\")\n    .replace(/&quot;/g, '\"')\n    .replace(/&#39;/g, \"'\")\n    .trim();\n\n  const boltActionRegex = /<boltAction([\\s\\S]*?)>([\\s\\S]*?)<\\/boltAction>/gi;\n\n  const steps: Step[] = [];\n\n  let match: RegExpExecArray | null;\n  while ((match = boltActionRegex.exec(cleaned)) !== null) {\n    let attrText = match[1] || \"\";\n    let content = (match[2] || \"\").trim();\n\n    attrText = attrText.replace(/\\\\\"/g, '\"').replace(/\\\\'/g, \"'\");\n\n    const filePathMatch = attrText.match(/filePath\\s*=\\s*[\"']([^\"']+)[\"']/i);\n    const filePath = filePathMatch ? filePathMatch[1].trim() : \"unknown\";\n\n    content = content\n      .replace(/\\\\r\\\\n/g, \"\\r\\n\")\n      .replace(/\\\\n/g, \"\\n\")\n      .replace(/\\\\t/g, \"\\t\")\n      .replace(/\\\\'/g, \"'\")\n      .replace(/\\\\\"/g, '\"')\n      .replace(/\\\\\\\\/g, \"\\\\\");\n\n    steps.push({\n      title: filePath,\n      status: \"Pending\",\n      content,\n    });\n  }\n\n  return steps;\n}\n"],"names":[],"mappings":";;;;AAEe,eAAe,YAAY,GAAW;IACnD,IAAI,CAAC,KAAK,OAAO,EAAE;IAEnB,IAAI,UAAU,IACX,OAAO,CAAC,WAAW,IACnB,OAAO,CAAC,eAAe,IACvB,OAAO,CAAC,SAAS,IACjB,OAAO,CAAC,4BAA4B,IACpC,OAAO,CAAC,SAAS,KACjB,OAAO,CAAC,SAAS,KACjB,OAAO,CAAC,UAAU,KAClB,OAAO,CAAC,WAAW,KACnB,OAAO,CAAC,UAAU,KAClB,IAAI;IAEP,MAAM,kBAAkB;IAExB,MAAM,QAAgB,EAAE;IAExB,IAAI;IACJ,MAAO,CAAC,QAAQ,gBAAgB,IAAI,CAAC,QAAQ,MAAM,KAAM;QACvD,IAAI,WAAW,KAAK,CAAC,EAAE,IAAI;QAC3B,IAAI,UAAU,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI;QAEnC,WAAW,SAAS,OAAO,CAAC,QAAQ,KAAK,OAAO,CAAC,QAAQ;QAEzD,MAAM,gBAAgB,SAAS,KAAK,CAAC;QACrC,MAAM,WAAW,gBAAgB,aAAa,CAAC,EAAE,CAAC,IAAI,KAAK;QAE3D,UAAU,QACP,OAAO,CAAC,WAAW,QACnB,OAAO,CAAC,QAAQ,MAChB,OAAO,CAAC,QAAQ,MAChB,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,SAAS;QAEpB,MAAM,IAAI,CAAC;YACT,OAAO;YACP,QAAQ;YACR;QACF;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1050, "column": 0}, "map": {"version":3,"sources":["file:///home/jagdish/Desktop/harkirat/bolt-project/my-bolt/src/components/webContainerPage/index.tsx"],"sourcesContent":["\"use client\";\nimport { userContext } from \"@/app/context/user\";\nimport { JSX, ReactNode, useContext, useEffect, useState } from \"react\";\nimport { Card, CardContent } from \"../ui/card\";\nimport getWebcontainerState from \"@/app/helpers/getWebContainerState\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"../ui/tabs\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"../ui/accordion\";\nimport { ScrollArea } from \"../ui/scroll-area\";\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { DirectoryNode, FileNode, WebContainer } from \"@webcontainer/api\"\nimport { FileSystemTree, Step } from \"@/app/types/user\";\nimport { buildTreeUI } from \"@/app/helpers/buildTree\";\nimport xmltostring from \"@/app/helpers/xmltostring\";\n\n\n\n\nfunction WrapperOfString({ code }: { code: string }) {\n    return (\n\n      <SyntaxHighlighter language=\"tsx\">\n        \n        {code}\n      \n      </SyntaxHighlighter>\n\n    )\n}\n\n\nfunction IframeComponent({ url }: { url: string }) {\n  return (\n    <iframe src={url} className=\"w-full h-full\"></iframe>\n  )\n}\n\nexport default function WebContainerBlock({ id }: { id: string }) {\n  const { webContainerState, setWebContainerState } = useContext(userContext)!;\n  const [webContainerFileTreeState, setWebcontainerFileTreeState] = useState<FileSystemTree>()\n  const [codePreview, setCodePreview] = useState<string>(\"\");\n  const [finalArray, setFinalArray] = useState<ReactNode>(<></>);\n  const [webContainerInstance, setWebContainerInstance] = useState<WebContainer>()\n  const [iframURL, setIframeURL] = useState<string | null>(null);\n  \n\n  function FilesShowing({ files, parser }: { files: FileSystemTree, parser: DOMParser }) {\n\n    return (\n      <div className=\"flex flex-col gap-3 w-full h-full\">\n        {Object.entries(files).map(([item, node]) =>\n\n          \"file\" in node ?\n            <span key={item} onClick={() => (setCodePreview((node as FileNode).file.contents as string))} className=\"hover:cursor-pointer bg-amber-100 rounded-[11px] p-3\">{item}</span>\n\n            :\n            <Accordion key={item} type=\"single\" collapsible>\n              <AccordionItem value={`${Math.random()}`} className=\"hover:cursor-pointer bg-amber-100 rounded-[11px] p-3\">\n                <AccordionTrigger>{item}</AccordionTrigger>\n                <ScrollArea>\n                  <AccordionContent>\n                    <FilesShowing files={((node as DirectoryNode).directory) as FileSystemTree} parser={parser} />\n                  </AccordionContent>\n\n                </ScrollArea>\n\n              </AccordionItem>\n            </Accordion>\n        )\n        }\n      </div>\n    )\n  }\n\n\n\n  useEffect(() => {\n    async function getwebstate() {\n      const messages = await getWebcontainerState(id);\n\n      let convertedMessagesForMounting;\n      if (messages.data != null) {\n        convertedMessagesForMounting = messages.data?.state?.files!;\n        console.log(convertedMessagesForMounting);\n        //file structure in string\n        setWebContainerState(convertedMessagesForMounting);\n        const correctedXML : Step[] = await xmltostring(convertedMessagesForMounting);\n        console.log(\"finalXML\",correctedXML)\n        const webContainerFileStructure = buildTreeUI(correctedXML);\n        //here i am updating the state of the webContainer\n\n        console.log(\"tree ...\", webContainerFileStructure)\n        setWebcontainerFileTreeState(webContainerFileStructure);\n        const parser = new DOMParser();\n        setFinalArray(<FilesShowing files={webContainerFileStructure} parser={parser} />);\n\n\n          const conatiner = await WebContainer.boot();\n          setWebContainerInstance(conatiner);\n          if (webContainerFileStructure != null) {\n            console.log(\"Mounting\")\n            await conatiner.mount(webContainerFileStructure);\n            console.log(\"Mounting finished\")\n          }\n        \n      }\n\n    }\n\n    getwebstate()\n  }, []);\n\n\n  useEffect(() => {\n\n    async function moutingFiles(webContainerState: FileSystemTree, webContainerInstance: WebContainer) {\n      console.log(\"state : \", webContainerState)\n      console.log(\"Mounting\")\n      await webContainerInstance?.mount(webContainerState!);\n      console.log(\"Mounting finished\")\n      const packageJSON = await webContainerInstance?.fs.readFile('package.json', 'utf-8');\n      console.log(packageJSON);\n      return \n    }\n\n    async function updateTheWebcontainerState(webContainerState : string, webContainerInstance :WebContainer ) {\n        const correctedXML = await xmltostring(webContainerState);\n        console.log(correctedXML)\n        const webContainerFileStructure = buildTreeUI(correctedXML);\n        setWebcontainerFileTreeState(webContainerFileStructure)\n        return moutingFiles(webContainerFileStructure, webContainerInstance);\n    }\n\n     if (webContainerState != null && webContainerInstance != null) {\n      console.log(\"Updating new files...\")\n       updateTheWebcontainerState(webContainerState, webContainerInstance)\n     }\n\n  }, [webContainerState])\n\n\n  async function startDevSever() {\n    \n    const installProcess1 = await webContainerInstance?.spawn(\"npm\", [\"install\"])\n    installProcess1?.output.pipeTo(new WritableStream({\n      write(data) {\n        \n        console.log(data);\n      }\n    }))\n    \n\n    const installProcess2 = await webContainerInstance?.spawn(\"npm\", [\"run\", \"dev\"])\n    webContainerInstance?.on(\"server-ready\", (port, url) => {\n      setIframeURL(url)\n    })\n\n    installProcess2?.output.pipeTo(new WritableStream({\n      write(data) {\n\n        console.log(data);\n      }\n    }))\n\n  }\n\n  return (\n    <div className=\"w-full h-full p-3 \">\n      <Tabs defaultValue=\"code\" className=\"w-full h-full\">\n        <TabsList>\n          <TabsTrigger value=\"code\" className=\"hover:cursor-pointer\">\n            Code\n          </TabsTrigger>\n          <TabsTrigger value=\"preview\" className=\"hover:cursor-pointer\" onClick={() => { startDevSever() }}>\n            Preview\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"code\" className=\"flex gap-3 h-[97%]\">\n          <Card className=\"w-[30%] h-full\">\n            <ScrollArea className=\"h-[99%]\">\n              <CardContent className=\"w-full h-full\">\n                {finalArray ? finalArray : \"No files found\"}\n              </CardContent>\n            </ScrollArea>\n          </Card>\n\n          <Card className=\"w-[67%]\">\n            <ScrollArea className=\"h-[99%]\">\n\n              <CardContent>\n                <WrapperOfString code={codePreview} />\n              </CardContent>\n            </ScrollArea>\n          </Card>\n        </TabsContent>\n        <TabsContent value=\"preview\" className=\"w-full h-200\">\n          <Card className=\"w-full h-full\">\n            <CardContent className=\"w-full h-full\">\n              {iframURL ? <IframeComponent url={iframURL} /> : \"Preview is loading....\"}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\n\n\n"],"names":[],"mappings":"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","debugId":null}}]
}